<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Checkout - Sharif's Store</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800">

  <div class="max-w-4xl mx-auto p-6 bg-white shadow-md rounded-md mt-10">
    <h2 class="text-2xl font-bold mb-6 text-center text-gray-800">Checkout</h2>

    <!-- Order Summary (Injected by JS) -->
    <div id="orderSummary" class="mb-6 p-4 bg-gray-50 border rounded hidden"></div>

    <!-- Checkout Form -->
    <form id="checkoutForm" class="space-y-6">
      <!-- Shipping Info -->
      <div>
        <h3 class="text-lg font-semibold mb-2">Shipping Information</h3>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <input type="text" placeholder="Full Name" class="p-2 border rounded w-full" required />
          <input type="email" placeholder="Email Address" class="p-2 border rounded w-full" required />
          <input type="text" placeholder="Phone Number" class="p-2 border rounded w-full" required />
          <input type="text" placeholder="Delivery Address" class="p-2 border rounded w-full sm:col-span-2" required />
        </div>
      </div>

      <!-- Payment Method -->
      <div>
        <h3 class="text-lg font-semibold mb-2">Payment Method</h3>
        <div class="space-y-3">
          <label class="flex items-center gap-2">
            <input type="radio" name="payment" value="bkash" class="accent-pink-600" required />
            <span>bKash (Send to: 01XXXXXXXXX)</span>
          </label>
          <label class="flex items-center gap-2">
            <input type="radio" name="payment" value="nagad" class="accent-red-600" />
            <span>Nagad (Send to: 01XXXXXXXXX)</span>
          </label>
          <label class="flex items-center gap-2">
            <input type="radio" name="payment" value="card" class="accent-blue-600" />
            <span>Credit/Debit Card</span>
          </label>
          <label class="flex items-center gap-2">
            <input type="radio" name="payment" value="cod" class="accent-green-600" />
            <span>Cash on Delivery</span>
          </label>
        </div>

        <!-- Card Info -->
        <div id="cardInfo" class="mt-4 hidden space-y-3">
          <input type="text" placeholder="Card Number" class="p-2 border rounded w-full" />
          <div class="grid grid-cols-2 gap-3">
            <input type="text" placeholder="Expiry Date (MM/YY)" class="p-2 border rounded w-full" />
            <input type="text" placeholder="CVV" class="p-2 border rounded w-full" />
          </div>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="text-center">
        <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition">
          Place Order
        </button>
      </div>
    </form>
  </div>

  <!-- Success Modal -->
  <div id="successModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white p-6 rounded shadow text-center max-w-sm">
      <h2 class="text-xl font-bold text-green-600 mb-2">Order Placed Successfully!</h2>
      <p class="text-gray-700">Thank you for shopping with us.</p>
      <button onclick="closeModal()" class="mt-4 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">
        Close
      </button>
    </div>
  </div>

  <script>
    const paymentRadios = document.querySelectorAll('input[name="payment"]');
    const cardInfo = document.getElementById("cardInfo");

    // Show/hide card input fields
    paymentRadios.forEach(radio => {
      radio.addEventListener("change", () => {
        cardInfo.classList.toggle("hidden", radio.value !== "card");
      });
    });

    // Load cart and show order summary
    document.addEventListener("DOMContentLoaded", () => {
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      const summaryBox = document.getElementById("orderSummary");

      if (cart.length === 0) {
        summaryBox.classList.remove("hidden");
        summaryBox.innerHTML = "<p>Your cart is empty.</p>";
        return;
      }

      let total = 0;
      let html = "<h3 class='text-lg font-semibold mb-2'>Order Summary</h3><ul class='list-disc pl-5 space-y-1'>";
      cart.forEach(item => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;
        html += `<li>${item.name} Ã— ${item.quantity} - $${itemTotal.toFixed(2)}</li>`;
      });
      html += `</ul><p class='mt-3 font-bold'>Total: $${total.toFixed(2)}</p>`;
      summaryBox.classList.remove("hidden");
      summaryBox.innerHTML = html;
    });

    // Submit handler
    document.getElementById("checkoutForm").addEventListener("submit", function (e) {
      e.preventDefault();

      // Clear cart
      localStorage.removeItem("cart");

      // Show success modal
      document.getElementById("successModal").classList.remove("hidden");
    });

    // Close modal
    function closeModal() {
      document.getElementById("successModal").classList.add("hidden");
      window.location.href = "index.html"; // Or redirect elsewhere if needed
    }
  </script>

</body>
</html>
